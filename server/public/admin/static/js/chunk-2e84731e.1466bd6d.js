(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e84731e"],{"01ea":function(t,e){t.exports={LIMIT_UPLOAD_SIZE:5}},2909:function(t,e,i){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function s(t){if(Array.isArray(t))return a(t)}function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function n(t,e){if(t){if("string"===typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return s(t)||l(t)||n(t)||r()}i.d(e,"a",(function(){return o}))},"333b":function(t,e,i){"use strict";i("40f1")},"40f1":function(t,e,i){},6247:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"selectImage"},[t.imgList.length?i("div",t._l(t.imgList,(function(e,a){return i("div",{key:a,staticClass:"imgBox",on:{click:function(e){t.visible=!0}}},[i("el-image",{staticClass:"smallImg",attrs:{src:t._f("imgUrl")(e),fit:"contain"}})],1)})),0):i("div",{staticClass:"imgBox",on:{click:function(e){t.visible=!0}}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{title:"选择图片",visible:t.visible,"append-to-body":""},on:{"update:visible":function(e){t.visible=e}}},[i("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],on:{"tab-click":t.handleTabClick},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("el-tab-pane",{attrs:{label:"外链图片",name:"link"}},[i("el-input",{attrs:{placeholder:"请输入图片外链地址",size:"medium"},model:{value:t.linkImgUrl,callback:function(e){t.linkImgUrl=e},expression:"linkImgUrl"}})],1),i("el-tab-pane",{attrs:{label:"上传图片",name:"upload"}},[i("el-upload",{ref:"upload",attrs:{action:t.HOST+"/api/user/upload/image",name:"files",accept:"image/jpeg,image/png,image/gif,image/jpg,image/bmp",headers:t.headers,"list-type":"picture-card","auto-upload":!1,limit:t.uploadLimit,"on-change":t.handleOnChange,"on-preview":t.handlePictureCardPreview,"on-success":t.handleUploadSuccess,"on-error":t.handleUploadFail}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),i("el-tab-pane",{attrs:{label:"素材库",name:"store"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},s=[],l=(i("ac6a"),i("6b54"),i("2909")),n=(i("c5f6"),i("01ea")),r={name:"selectImage",data:function(){return{visible:!1,activeTab:"link",linkImgUrl:"",dialogImageUrl:"",dialogVisible:!1,disabled:!1,fileList:[],imgList:[],loading:!1}},props:{uploadLimit:{type:Number,default:6},value:{type:[Array,String],default:""}},methods:{show:function(){this.visible=!0},confirm:function(){switch(this.activeTab){case"link":this.linkImgUrl&&(this.imgList=[this.linkImgUrl],this.$emit("input",this.linkImgUrl));break;case"upload":this.loading=!0,this.$refs.upload.submit();break}this.visible=!1},cancel:function(){this.visible=!1},handleTabClick:function(t){},handleOnChange:function(t,e){/(gif|jpg|jpeg|png|GIF|JPG|PNG|bmp|BMP)/.test(t.raw.type)?t.raw.size/1024/1024>n["LIMIT_UPLOAD_SIZE"]&&(this.$message.error("图片大小不能超过".concat(n["LIMIT_UPLOAD_SIZE"],"MB")),e.pop()):(this.$message.error("请选择图片文件"),e.pop()),this.fileList=e},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleUploadSuccess:function(t,e,i){var a;console.log(t,e,i),1==this.uploadLimit?this.imgList=[t.data[0]]:(a=this.imgList).push.apply(a,Object(l["a"])(t.data)),this.imgList.length==this.fileList.length&&(this.loading=!1,this.$emit("input",1==this.uploadLimit?this.imgList[0]:this.imgList))},handleUploadFail:function(t,e,i){console.log(t),this.$message.error(t.toString()),this.loading=!1}},computed:{headers:function(){return{Authorization:"Bearer "+this.$store.state.user.token}},HOST:function(){return this.$store.state.HOST}},watch:{value:{immediate:!0,handler:function(t,e){var i=this;""!=e||this.imgList.length||this.value&&(this.value instanceof Array?this.value.forEach((function(t){i.imgList.push(t)})):this.imgList.push(this.value))}}}},o=r,c=(i("333b"),i("2877")),m=Object(c["a"])(o,a,s,!1,null,"5890adfa",null);e["a"]=m.exports},6974:function(t,e,i){"use strict";i("d6ff")},7424:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 系统设定 ")])],1)],1),i("div",{staticClass:"container"},[i("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"网站设置",name:"site"}},[i("el-form",{ref:"form_site",attrs:{model:t.form_site,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"网站名称"}},[i("el-input",{staticClass:"form-input",attrs:{placeholder:""},model:{value:t.form_site.name,callback:function(e){t.$set(t.form_site,"name",e)},expression:"form_site.name"}})],1),i("el-form-item",{attrs:{label:"用户称呼"}},[i("el-input",{staticClass:"form-input",attrs:{placeholder:""},model:{value:t.form_site.callName,callback:function(e){t.$set(t.form_site,"callName",e)},expression:"form_site.callName"}})],1),i("el-form-item",{attrs:{label:"开放注册"}},[i("el-switch",{model:{value:t.form_site.allowRegister,callback:function(e){t.$set(t.form_site,"allowRegister",e)},expression:"form_site.allowRegister"}})],1),i("el-form-item",{attrs:{label:"允许评论"}},[i("el-switch",{model:{value:t.form_site.allowComment,callback:function(e){t.$set(t.form_site,"allowComment",e)},expression:"form_site.allowComment"}})],1),i("el-form-item",{attrs:{label:"允许留言"}},[i("el-switch",{model:{value:t.form_site.allowBoard,callback:function(e){t.$set(t.form_site,"allowBoard",e)},expression:"form_site.allowBoard"}})],1),i("el-form-item",{attrs:{label:"开启网站"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form_site.status,callback:function(e){t.$set(t.form_site,"status",e)},expression:"form_site.status"}})],1),i("el-form-item",{attrs:{label:"文章默认封面"}},[i("selectImage",{ref:"selectImageAr",attrs:{uploadLimit:1},model:{value:t.form_site.articleCover,callback:function(e){t.$set(t.form_site,"articleCover",e)},expression:"form_site.articleCover"}})],1),i("el-form-item",{attrs:{label:"网站公告"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:"",autosize:{minRows:4}},model:{value:t.form_site.notic,callback:function(e){t.$set(t.form_site,"notic",e)},expression:"form_site.notic"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form_site")}}},[t._v("保存")])],1)],1)],1),i("el-tab-pane",{attrs:{label:"用户配置",name:"user"}})],1)],1)])},s=[],l=i("90e7"),n=i("6247"),r={name:"setting",data:function(){return{activeName:"site",form_site:{allowRegister:!0,allowComment:!0,allowBoard:!0,status:1},form_user:{}}},created:function(){this.getData()},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(i){if(i){if(1==e.$refs.selectImageAr.loading)return e.$message.warning("请等待图片上传完毕后提交"),e.$refs.selectImage.show();var a="form_site"==t?"site":"";Object(l["b"])({type:a,data:JSON.stringify(e.form_site)}).then((function(t){}))}}))},getData:function(){var t=this;Object(l["c"])().then((function(e){for(var i in e.data){var a=e.data[i];for(var s in a)t.$set(t.$data["form_".concat(i)],s,a[s])}}))}},components:{selectImage:n["a"]}},o=r,c=(i("6974"),i("2877")),m=Object(c["a"])(o,a,s,!1,null,"2a8f9cce",null);e["default"]=m.exports},"90e7":function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return l})),i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return r}));var a=i("b775"),s=function(t){return Object(a["a"])({url:"/admin/setting",method:"get",params:t||{},showMsg:!1})},l=function(t){return Object(a["a"])({url:"/admin/setting/list",method:"get",params:t||{},showMsg:!1})},n=function(t){return Object(a["a"])({url:"/admin/setting/add",method:"post",data:t||{}})},r=function(t){return Object(a["a"])({url:"/admin/setting/edit",method:"post",data:t||{}})}},d6ff:function(t,e,i){}}]);