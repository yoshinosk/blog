(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-052e7d9c"],{"87b9":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 权限管理\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.getData}}),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.editVisible=!0}}},[t._v("添加")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","header-cell-class-name":"table-header","row-key":"_id"}},[i("el-table-column",{attrs:{prop:"_id",label:"ID",width:"120"}}),i("el-table-column",{attrs:{prop:"name",label:"权限名称"}}),i("el-table-column",{attrs:{prop:"field",label:"列名",align:"left"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1),i("el-dialog",{attrs:{title:t.editMode?"编辑":"添加",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"权限名称",required:""}},[i("el-input",{attrs:{placeholder:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"列名",required:""}},[i("el-input",{attrs:{placeholder:""},model:{value:t.form.field,callback:function(e){t.$set(t.form,"field",e)},expression:"form.field"}})],1),i("el-form-item",{attrs:{label:"分类"}},[i("el-cascader",{attrs:{options:t.tableData,props:t.cascaderProps,disabled:!t.form.pid&&t.form._id&&!t.form.isRights},on:{change:t.handleChange},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}})],1),i("el-form-item",{attrs:{label:"是否为子权限"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.isRights,callback:function(e){t.$set(t.form,"isRights",e)},expression:"form.isRights"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1)],1)},n=[],l=(i("7f7f"),i("ac6a"),i("9bdd")),r={name:"rights",data:function(){return{query:{},tableData:[],editMode:!1,editVisible:!1,form:{},cascaderProps:{value:"_id",label:"name",checkStrictly:!0}}},created:function(){this.getData()},watch:{editVisible:function(t){t||(this.form={},this.editMode=!1)}},methods:{handleChange:function(t){t&&t.length&&this.$set(this.form,"pid",t.at(-1))},getData:function(){var t=this;Object(l["d"])(this.query).then((function(e){var i=function t(e){e.forEach((function(e){e.isRights?e.disabled=!0:e.children&&t(e.children)}))};i(e.data),t.tableData=e.data}))},handleEdit:function(t,e){this.form=e,this.editMode=!0,this.editVisible=!0},saveEdit:function(){var t=this,e=this.editMode?l["c"]:l["a"];if(this.form._id&&this.form.pid==this.form._id)return this.$message.error("禁止选择当前分类");e(this.form).then((function(e){t.getData(),t.editVisible=!1}))},handleDelete:function(t){var e=this;this.$confirm("请确认是否删除权限：".concat(t.name)).then((function(){Object(l["b"])(t._id).then((function(t){e.getData()}))}))}}},o=r,s=i("2877"),c=Object(s["a"])(o,a,n,!1,null,"3c161cd0",null);e["default"]=c.exports},"9bdd":function(t,e,i){"use strict";i.d(e,"d",(function(){return n})),i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return o}));var a=i("b775"),n=function(t){return Object(a["a"])({url:"/admin/rights/list",method:"get",params:t||{},showMsg:!1})},l=function(t){return Object(a["a"])({url:"/admin/rights/add",method:"post",data:t||{}})},r=function(t){return Object(a["a"])({url:"/admin/rights/edit",method:"post",data:t||{}})},o=function(t){return Object(a["a"])({url:"/admin/rights/del",method:"delete",data:{id:t}})}}}]);